@using BasicBlazorApp1.Core.Domain.Aplication.Interfaces;
@using BasicBlazorApp1.Infraestructure.Implementation;
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="d-flex flex-row">
                <li class='container-md'>
                    <div class='nav-link text-white'>
                        <i><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' fill='currentColor' class='bi bi-instagram' viewBox='0 0 16 16'> <path d=@InstagramLogopath /></svg> </i>
                    </div>
                </li>
                @createMarkupString(ReturnsHtml(addsItemToMenu(),true))

            </div>
        </div>
    </div>
</nav>

<script>
    const tooltip = document.querySelectorAll(".Tt")
    tooltip.forEach(t => {
        new bootstrap.Tooltip(t)
    })
</script>

@code {


    private string title = "NavBar Example";
    string InstagramLogopath = "M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.510-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.780-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.780-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z";

    string returnsTitle()
    {
        return title;
    }

    public string ReturnsHtml(IBaseItem item, bool firstMenu)
    {
        string colorLetras;

        if (firstMenu)
        {
            colorLetras = "text-white";
        }
        else
        {
            colorLetras = "text-black";
        }

        string html = "";
       
        switch (item)
        {
            case ItemTitle itemTitle:
                html += $@"<li class='container-md'><div class='nav-link {colorLetras}'>{item.Title}";
                if (item.ImageSource != null)
                { html += $@"<i><svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' fill='currentColor' class='bi bi-instagram' viewBox='0 0 16 16'> <path d={InstagramLogopath} /></svg> </i>"; }
                else { }
                html += $@"</div></li>";

                break;
            case ItemUrl itemUrl:
                html += $@"<li class='container-md'><a class='nav-link {colorLetras}' href='{itemUrl.Url}'>{itemUrl.Title}</a></li>";
                break;
            case ItemDescription itemDescription:
                html += $@"<span class='Tt' data-bs-placement='bottom' title='{itemDescription.Description}'><li class='container-md'><div class='nav-link {colorLetras}'>{item.Title}</div></li></span>";
                break;
            case ItemMenuList itemMenuList:
                if (itemMenuList.Title == null)
                {
                    foreach (var itemMenu in itemMenuList.Items)
                    {
                        html += ReturnsHtml(itemMenu, true);
                    }
                }
                else if (firstMenu == true)
                {
                    html += $@"<li class='nav-item dropdown'>
                            <a class='nav-link dropdown-toggle {colorLetras}' href='#' role='button' data-bs-toggle='dropdown' aria-expanded='false'>
                            {itemMenuList.Title}
                            </a>
                            <ul class='dropdown-menu'>";
                    foreach (var itemMenu in itemMenuList.Items)
                    {
                        html += ReturnsHtml(itemMenu, false);
                    };
                    html += "</ul></li>";
                }
                else
                {
                    html += $@"
                    <div class='btn-group dropend'>
                        <a type='button' class='dropdown-item dropdown-toggle p-0' data-bs-toggle='dropdown' aria-expanded='false'>
                            CCC
                        </a>
                        <ul class='dropdown-menu'>
                            <li><a class='dropdown-item' href='#'>DDD</a></li>
                            <li><a class='dropdown-item' href='#'>EEE</a></li>
                        </ul>
                    </div>";
                }
                break;
            default:
                break;
        }

        return html;
    }

    MarkupString createMarkupString(string html)
    {
        MarkupString markupString = new MarkupString(html);
        return markupString;
    }

    MarkupString markupStringExample = new MarkupString();
    string htmlExample = "";
    ItemTitle itemExample = new ItemTitle()
        {
            Title = "DADA",
            ImageSource = "asdasd"
        };

    ItemMenuList addsItemToMenu()
    {
        return new ItemMenuList()
            {
                Items = new List<IBaseItem>() {
            new ItemTitle() {
                    Title = "PrimeraVuelta", ImageSource = "asdasd"
                },
                new ItemTitle() {
                    Title = "PrimeraVuelta"
                },
                new ItemDescription() {
                    Title = "Descripcion", Description ="esta es la descripcion"
                },
                new ItemUrl() {
                    Title = "url", Url = "https://www.instagram.com/?hl=es"
                },

                new ItemMenuList() {
                    Title = "Menu Desplegable", Items = new List < IBaseItem > () {
                        new ItemUrl() {
                                Title = "urlMenu", Url = "https://www.instagram.com/?hl=es"
                            },
                            new ItemDescription() {
                    Title = "Descripcion", Description ="esta es la descripcion"
                            },

                            new ItemMenuList() {
                                Title = "Titulo", Items = new List < IBaseItem > ()

                                {
                                    new ItemTitle() {
                                            Title = "TerceraVuelta", ImageSource = "asdasd"
                                        },
                                        new ItemUrl() {
                                            Title = "urlTerceraVuelta", Url = "https://www.instagram.com/?hl=es"
                                        }
                                }
                            }
                    }
                }
        }
            };
    }

}